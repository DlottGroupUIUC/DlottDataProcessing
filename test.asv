function AVG_RAD = AVG_Data(Short_Radiance_Matrix)
%This version specifically for higher bin resolution data (i.e ~30).
%Load files to analyze
[r,p]=uigetfile('*3.txt;*.tdms;*short.txt','multiselect','on');

N = length(Short_Radiance_Matrix(:,:,1); %int number of files
for q=1:length(N)
    
    data=Short_Radiance_Matrix(:,:,q); %pull individual matrix out
    
    while size(data,1)>134 %generalize for more binning params
        
        data(1,:)=[];
        
    end
        
    data_3d(:,:,q)=data;
end

time=data_3d(:,1,:);
t=permute(time,[1,3,2]);

mean_data=mean(data_3d,3);

%Prompt for file name
prompt={'Enter file save name'};
dlg_title='Saved file name';
name=[cell2mat(inputdlg(prompt,dlg_title))];

text_name=[name,' avg_spec_rad_short.txt'];
wd = pwd;
cd(p);
dlmwrite(text_name,mean_data,' ');
cd(wd);